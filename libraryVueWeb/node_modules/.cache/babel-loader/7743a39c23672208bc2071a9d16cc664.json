{"remainingRequest":"D:\\gitFactory\\library\\project\\libraryVueWeb\\node_modules\\babel-loader\\lib\\index.js!D:\\gitFactory\\library\\project\\libraryVueWeb\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\gitFactory\\library\\project\\libraryVueWeb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\gitFactory\\library\\project\\libraryVueWeb\\src\\views\\announcement\\components\\ArticleDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\gitFactory\\library\\project\\libraryVueWeb\\src\\views\\announcement\\components\\ArticleDetail.vue","mtime":1576776401604},{"path":"D:\\gitFactory\\library\\project\\libraryVueWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1575272867830},{"path":"D:\\gitFactory\\library\\project\\libraryVueWeb\\node_modules\\babel-loader\\lib\\index.js","mtime":1575272866404},{"path":"D:\\gitFactory\\library\\project\\libraryVueWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1575272867830},{"path":"D:\\gitFactory\\library\\project\\libraryVueWeb\\node_modules\\vue-loader\\lib\\index.js","mtime":1575272905142}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"D:\\\\gitFactory\\\\library\\\\project\\\\libraryVueWeb\\\\node_modules\\\\@babel\\\\runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _Tinymce = _interopRequireDefault(require(\"@/components/Tinymce\"));\n\nvar _SingleImage = _interopRequireDefault(require(\"@/components/Upload/SingleImage3\"));\n\nvar _MDinput = _interopRequireDefault(require(\"@/components/MDinput\"));\n\nvar _Sticky = _interopRequireDefault(require(\"@/components/Sticky\"));\n\nvar _validate = require(\"@/utils/validate\");\n\nvar _article = require(\"@/api/article\");\n\nvar _Warning = _interopRequireDefault(require(\"./Warning\"));\n\nvar _Dropdown = require(\"./Dropdown\");\n\nvar _axios = _interopRequireDefault(require(\"axios\"));\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n// 粘性header组件\nvar defaultForm = {\n  status: 'draft',\n  title: '',\n  // 文章题目\n  content: '',\n  // 文章内容\n  content_short: '',\n  // 文章摘要\n  display_time: undefined,\n  // 前台展示时间\n  id: undefined,\n  importance: 0\n};\nvar _default = {\n  name: 'ArticleDetail',\n  components: {\n    Tinymce: _Tinymce.default,\n    MDinput: _MDinput.default,\n    Upload: _SingleImage.default,\n    Sticky: _Sticky.default,\n    Warning: _Warning.default,\n    CommentDropdown: _Dropdown.CommentDropdown,\n    PlatformDropdown: _Dropdown.PlatformDropdown,\n    SourceUrlDropdown: _Dropdown.SourceUrlDropdown\n  },\n  props: {\n    isEdit: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data: function data() {\n    return {\n      postForm: {\n        status: 'draft',\n        title: '',\n        // 文章题目\n        content: '',\n        // 文章内容\n        content_short: '',\n        // 文章摘要\n        display_time: undefined,\n        // 前台展示时间\n        importance: 0,\n        author: ''\n      },\n      rules: {\n        title: [{\n          required: true,\n          message: '请输入标题',\n          trigger: 'blur'\n        }, {\n          min: 2,\n          max: 30,\n          message: '长度在 2 到 30 个字符（包括汉字）',\n          trigger: 'blur'\n        }],\n        content: [// { max: 500, message: '最多不超过500个字符', trigger: 'blur' }\n        {\n          required: true,\n          message: '请输入发布内容',\n          trigger: 'blur'\n        }, {\n          min: 2,\n          max: 2000,\n          message: '生成的html长度在 2 到 2000 个字符',\n          trigger: 'blur'\n        }],\n        content_short: [{\n          required: true,\n          message: '请输入概要',\n          trigger: 'blur'\n        }, {\n          min: 2,\n          max: 250,\n          message: '长度在 2 到 250 个字符（包括汉字）',\n          trigger: 'blur'\n        }],\n        author: [{\n          required: true,\n          message: '请输入作者',\n          trigger: 'blur'\n        }, {\n          min: 1,\n          max: 12,\n          message: '长度在 1 到 12 个字符（包括汉字）',\n          trigger: 'blur'\n        }],\n        display_time: [{\n          required: true,\n          message: '请选择时间',\n          trigger: 'blur'\n        }],\n        important: []\n      }\n    };\n  },\n  methods: {\n    submitForm: function submitForm() {\n      var _this = this;\n\n      var vm = this;\n      console.log(this.postForm);\n      this.$refs.postForm.validate(function (valid) {\n        if (valid) {\n          self = _this;\n          var path = 'http://127.0.0.1:5000/api/announcement/publish';\n\n          _axios.default.post(path, {\n            title: vm.postForm.title,\n            content: vm.postForm.content,\n            content_short: vm.postForm.content_short,\n            time: _this.moment(vm.postForm.display_time).format(\"YYYY-MM-DD HH:mm:ss\"),\n            importance: vm.postForm.importance,\n            author: vm.postForm.author\n          }).then(function (response) {\n            //  this.$refs[temp].resetFields();\n            vm.$notify({\n              title: '成功',\n              message: '发布文章成功',\n              type: 'success',\n              duration: 2000\n            });\n            vm.postForm.status = 'published';\n            self.loading = false;\n          }).catch(function (error) {\n            vm.$message({\n              type: 'info',\n              message: '发布失败'\n            });\n          });\n\n          _this.loading = false;\n        } else {\n          vm.$message({\n            type: 'info',\n            message: '发布失败，请检查输入是否完整'\n          });\n        }\n      });\n    }\n  }\n};\nexports.default = _default;",null]}