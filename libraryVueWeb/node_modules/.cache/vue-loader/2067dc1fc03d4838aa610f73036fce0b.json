{"remainingRequest":"D:\\library\\libraryVueWeb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\library\\libraryVueWeb\\src\\views\\message\\components\\ArticleDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\library\\libraryVueWeb\\src\\views\\message\\components\\ArticleDetail.vue","mtime":1594035537935},{"path":"D:\\library\\libraryVueWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1575272867830},{"path":"D:\\library\\libraryVueWeb\\node_modules\\babel-loader\\lib\\index.js","mtime":1575272866404},{"path":"D:\\library\\libraryVueWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1575272867830},{"path":"D:\\library\\libraryVueWeb\\node_modules\\vue-loader\\lib\\index.js","mtime":1575272905142}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\n\r\nimport Sticky from '@/components/Sticky' // 粘性header组件\r\nimport store from '../../../store/modules/user'\r\nimport permission from '@/directive/permission/index.js' // 权限判断指令\r\nimport axios from 'axios';\r\nconst defaultForm = {\r\n  status: 'draft',\r\n  id:store.state.name,\r\n  content: '', // 文章内容\r\n\r\n}\r\n\r\nexport default {\r\n  name: 'ArticleDetail',\r\n  components: { Sticky},\r\n  props: {\r\n    isEdit: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\n directives: { permission },\r\n  data() {\r\n    return{\r\n      postForm:{\r\n        status: 'draft',\r\n        id:store.state.name,\r\n        content: '', // 文章内容\r\n      },\r\n      rules: {\r\n\r\n        content: [\n           // { max: 500, message: '最多不超过500个字符', trigger: 'blur' }\r\n            {required: true, message: '请输入留言内容', trigger: 'blur' },\r\n            { min: 2, max: 200, message: '长度在 2 到 200 个字符(包含汉字)', trigger: 'blur' }\n        ],\r\n\r\n      },\r\n    }\r\n\r\n  },\r\n\r\n  methods: {\r\n\r\n    submitForm() {\r\n      var vm=this\r\n      console.log(this.postForm)\r\n      this.$refs.postForm.validate(valid => {\r\n        if (valid) {\r\n          self=this\r\n          const path = 'http://127.0.0.1:5000/api/message/publish';\r\n                axios.post(path, {\r\n                   content:vm.postForm.content,\r\n                   readID:vm.postForm.id,\r\n\r\n                  })\r\n\r\n                  .then(function (response) {\r\n                  //  this.$refs[temp].resetFields();\r\n                   \r\n                      vm.$notify({\r\n                        title: '成功',\r\n                        message: '发布留言成功',\r\n                        type: 'success',\r\n                        duration: 2000,\r\n\r\n                      })\r\n                      vm.postForm.status = 'published'\r\n                      self.loading = false\r\n                  })\r\n                  .catch(function (error) {\r\n                     vm.$message({\r\n                        type: 'info',\r\n                        message: '发布失败'\r\n                      });\r\n\r\n                })\r\n             this.loading = false\r\n        } else {\r\n          vm.$message({\r\n                  type: 'info',\r\n                  message: '发布失败，请检查输入是否完整'\r\n           });\r\n        }\r\n      })\r\n    },\r\n\r\n  }\r\n}\r\n",null]}