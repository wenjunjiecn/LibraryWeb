{"remainingRequest":"D:\\library\\libraryVueWeb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\library\\libraryVueWeb\\src\\views\\dashboard\\user\\components\\Infocard.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\library\\libraryVueWeb\\src\\views\\dashboard\\user\\components\\Infocard.vue","mtime":1594046009789},{"path":"D:\\library\\libraryVueWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1575272867830},{"path":"D:\\library\\libraryVueWeb\\node_modules\\babel-loader\\lib\\index.js","mtime":1575272866404},{"path":"D:\\library\\libraryVueWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1575272867830},{"path":"D:\\library\\libraryVueWeb\\node_modules\\vue-loader\\lib\\index.js","mtime":1575272905142}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport PanThumb from '@/components/PanThumb'\nimport axios from 'axios';\nimport gettoken from '../../../../../src/store/modules/user.js'\r\nexport default {\r\n\r\n  data(){\r\n    return{\r\n      dialogFormVisible:false,\n      datalist:'',\n      detailList:{\n        title:'',\n        content:'',\n     },\r\n    }\r\n  },\n  created() {\n    this.getList()\n\n  },\r\n  methods:{\n    getList(){\n      var vm=this\n      let mytoken=gettoken.state.token\n      const path = 'http://127.0.0.1:5000/api/getinfolist';\n            axios.get(path,{params:{token:mytoken}})\n              .then((res) => {\n                vm.datalist = res.data;\n                vm.$message({\n                          message: '数据加载完成',\n                          type: 'success'\n                 });\n              })\n              .catch((error) => {\n\n                vm.$message({\n                        type: 'info',\n                        message: '获取数据失败，请检查网络'+error\n                });\n\n              });\n\n\n    },\n    detail(row){\n            this.dialogFormVisible=true;\n            this.detailList.title=row.author;\n            this.detailList.content=row.content\n\n    },\n    handleDelete(row){\n            var vm = this\n            this.$confirm('您即将删除一条消息，确定吗', '提示', {\n              confirmButtonText: '确定删除',\n              cancelButtonText: '点错了',\n              type: 'warning'\n            }).then(() => {\n              axios.post('http://127.0.0.1:5000/api/deleteinfo', {\n                  token:gettoken.state.token,\n                  infoid: row.infoid\n                })\n\n                .then(function(response) {\n                  //  this.$refs[temp].resetFields();\n                  vm.$message({\n                    type: 'success',\n                    message: '删除成功!'\n                  });\n                })\n                .catch(function(error) {\n                  vm.$message({\n                    type: 'info',\n                    message: error\n                  });\n                })\n\n              setTimeout(() => {\n                this.getList()\n              }, 1.5 * 1000)\n            }).catch(() => {\n              this.$message({\n                type: 'info',\n                message: '已取消删除'\n              });\n            });\n\n    },\n\n\n  },\n\r\n}\r\n",null]}